\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{e_title_caligraphy_chap}[Title Caligraphy Chapter Style]

%-----------------------------------------------------------------------
% Control the appearance of the title in mainmatter
% \titleformat provided by titlesec package
\renewcommand{\thepart}{\Roman{part}}

\titleformat{\part}%command
    [display]%shape
    {\normalfont\centering\large}%format
    {\thispagestyle{empty}\color{titlecolorchapter}\partname~\MakeUppercase{\thepart}}%label
    {1em}%sep
    {\color{titlecolorchapter}\MakeUppercase}%beforcode
    []
% Chapter number on inside
    % Chapter font
    \newfontfamily\alegchapter{Alegreya}[
    Numbers=OldStyle,
    UprightFont=*-Regular,  % Ensure regular weight
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    BoldItalicFont=*-BoldItalic,
]
\newcommand{\chapterNumber}{%
    \alegchapter\mdseries\upshape\fontsize{108pt}{120pt}\selectfont
}
\titleformat{\chapter}[display]%{<commmand>}[<shape>]
    {\normalfont} %<format>
    {\vspace*{-3\baselineskip}\makebox[\linewidth][r]{\color{titlecolorchapter}\chapterNumber\thechapter}}{15pt}%{<label>}{<sep>}
    {\raggedright\bfseries\large\MakeUppercase} %{<beforcode>}
    [\normalsize\vspace*{.8\baselineskip}\titlerule] %[<aftercode>]


    \titleformat{\section}
    {\normalfont\large\bfseries}{\thesection}{1em}{}