% sty_components/c101_layout.tex
% Define a toggle for CJK support
\newif\ifcjk
\cjktrue % Default to CJK support enabled
% Define class options
\DeclareOption{cjk}{\cjktrue}
\DeclareOption{nocjk}{\cjkfalse}
\ProcessOptions\relax

% Conditionally load CJK support
\ifcjk
% Load CJK packages
\RequirePackage{luatexja, luatexja-fontspec, luatexja-ruby}
\RequirePackage{silence}
\WarningFilter{luatexja}{LuaTeX-ja's patch against the microtype package}
% Set CJK-specific fonts
\setmainjfont[
    BoldFont={Source Han Serif Bold},
]{Source Han Serif}

\setsansjfont[
    BoldFont={Source Han Sans Bold},
]{Source Han Sans}

\setmonojfont{HanaMinA}

\else
% For non-CJK documents
\RequirePackage{fontspec}
\RequirePackage{microtype}
% Set Latin fonts only
\setmainfont{Noto Serif}[
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    BoldItalicFont=*-BoldItalic
]

\setsansfont{Noto Sans}[
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    BoldItalicFont=*-BoldItalic
]

\setmonofont{Source Code Pro}
\fi

% Language setup
\setdefaultlanguage{english}
\setotherlanguages{german,french,russian}

% Simplified math font setup - Choose ONE approach:

% Option 1: Pure STIX2 (recommended for consistency)

\setmathfont{STIX Two Math}[StylisticSet={01}] %range={"1D454,"1D488,"1D467}
\setmathfont{TeX Gyre Termes Math}[range={bb, scr, bfscr}]
\setmathfont{Latin Modern Math}[range= {cal, bfcal}]