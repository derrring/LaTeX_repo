% TOC

\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

% Command for a two-column, brief table of contents (depth = 2)
% Now includes itself in the table of contents.
\newcommand{\brieftoc}{%
  \begingroup
  \etocsettocstyle
    {% Before the ToC
      \clearpage
      \section*{Brief Contents}% Print the title
      % Add the "Brief Contents" line to the ToC for the next compilation
      \etoctoccontentsline{section}{Brief Contents}
    }
    {}% After the ToC
  \setcounter{tocdepth}{2}%
  \begin{multicols}{2}
    \tableofcontents
  \end{multicols}
  \endgroup
}

% Command for a single-column, detailed table of contents (depth = 3)
% Now includes itself in the table of contents.
\newcommand{\detailedtoc}{%
  \begingroup
  \etocsettocstyle
    {% Before the ToC
      \clearpage
      \section*{Detailed Contents}% Print the title
      % Add the "Detailed Contents" line to the ToC for the next compilation
      \etoctoccontentsline{section}{Detailed Contents}
    }
    {}% After the ToC
  \setcounter{tocdepth}{3}%
  \tableofcontents
  \endgroup
}

\newcommand{\mytoc}{%
    \cleardoublepage
    { % Keep etoc settings local to the main ToC
    \etocsettocstyle{
        \setcounter{tocdepth}{3} % Main ToC depth
        \renewcommand{\contentsname}{Contents}
        \section*{\contentsname}
    }{%
        \etoctoccontentsline{section}{\contentsname}
    }
    \tableofcontents
    }
    \cleardoublepage
}

\newcommand{\setuplocaltoc}{%
    \etocsettocstyle{
        \setcounter{tocdepth}{3}
        \rule{\linewidth}{1pt}
        \vskip0.5\baselineskip\parindent0em
    }{\vspace{-0.5em}\rule{\linewidth}{1pt}\vspace{2em}}
}


%-----------------------------------------------------------------------
%\etoctocstyle[⟨kind⟩]{⟨number_of_columns⟩}{⟨title⟩}

% part toc color
% \titlecontents provided by titletoc package [deprecated, use etoc instead]
% Define a custom TOC line style for parts
% Customizing the TOC
%\etocsettocstyle{⟨before_toc⟩}{⟨after_toc⟩}
%\etocsetstyle{⟨levelname⟩}{⟨start⟩}{⟨prefix⟩}{⟨contents⟩}{⟨finish⟩}

\def\mydotfill{\unskip\nobreak\leaders\hbox{\hss\ . \hss}\hfill\nobreak\relax}
%\hss = \hskip 0pt plus 1fill minus 1fill

\etocsetstyle{part}
    {\begingroup\parindent 0pt \nobreak \etocskipfirstprefix}
    {\pagebreak[3]\bigskip}
    {\normalsize\rmfamily\centering \color{red} %\scshape 
    \etocifnumbered{
      Part \etocnumber{} -- 
      }{
    }\MakeUppercase{\etocthename}\par} 
    {\endgroup}

\etocsetstyle{chapter}
    {\begingroup}
    {\addvspace{0.5em}\parindent0pt \color{black}\small} % Pre-code
    {\etocifnumbered{%
    \etocnumber\hspace{0.5em} \MakeUppercase{\etocthename}\hfill  \etocpage\par \addvspace{0.25em}
    }{%
      \MakeUppercase{\etocthename}\hfill \etocpage\par \addvspace{0.25em}
    }}
    {\endgroup\addvspace{0.2em}} % Post-code

\etocsetstyle{section}
    {\begingroup\addvspace{0.25em}\leftskip0em\parindent0pt\smallskip}
    {\footnotesize} % Pre-code
    {\etocifnumbered{%
    \etocnumber\hspace{0.3em} \etocname\mydotfill  \etocpage\par \addvspace{0.25em}
    }{%
    \etocname\hfill \etocpage\par\addvspace{0.25em}
    }}
    {\endgroup\par\medskip} % Post-code

\etocsetstyle{subsection}
  {\begingroup \leftskip1em \parfillskip 0pt plus 1fil\relax \nobreak}
  {\footnotesize\rmfamily\mdseries}
  {\etocifnumbered{%
  \etocnumber\hspace{0.3em} \etocname\mydotfill  \etocpage\par
  }{%
  \etocname\hfill \etocpage\par
  }}
  {\endgroup\par\smallskip}

\etocsetstyle{subsubsection}
  {\begingroup \leftskip3em \parfillskip 0pt plus 1fil\relax \nobreak}
  {\footnotesize\rmfamily\mdseries}
  {\etocifnumbered{%
  \etocnumber\hspace{0.3em} \etocname\mydotfill  \etocpage\par
  }{%
  \etocname\hfill \etocpage\par
  }}
  {\endgroup\par\smallskip}

%\etocsetstyle{appendix}
